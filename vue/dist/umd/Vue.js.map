{"version":3,"file":"vue.js","sources":["../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["class Observer {\n  constructor(value) {\n    // 使用defineProperty重新定义属性\n    this.walk(value)\n  }\n  walk(data) {\n    let keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key]) // Vue.util.defineReactive\n    })\n  }\n}\n\n// 监听当前变量的重要执行者\nfunction defineReactive(data, key, value) {\n  // data可能是多层，递归调用，给每个对象添加get set\n  observe(value)\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('用户获取到值')\n      return value\n    },\n    set(newValue) {\n      console.log('用户设置了值', data, key, value)\n      if (newValue === value) return\n      observe(newValue) // 如果用户将值改为对象继续监控\n      value = newValue\n    }\n  })\n}\n\nexport function observe(data) {\n  // typeof null 也是object\n  // 不是对象的判断\n  if (typeof data !== 'object' || data === null) {\n    return\n  }\n  return new Observer(data)\n}","import { observe } from \"./observer/index\"\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\nfunction initProps(vm) {}\nfunction initMethods(vm) {}\nfunction initData(vm) {\n  let { data } = vm.$options\n  // call改变this指向\n  vm._data = data = typeof data == 'function' ? data.call(vm) : data\n  observe(data)\n}\nfunction initComputed(vm) {}\nfunction initWatch(vm) {}","import { initState } from \"./state\"\n\nexport function initMixin(Vue) {\n  // 原型上不能使用箭头函数\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // 用户可以通过实例访问Vue属性\n    vm.$options = options\n    // 初始化状态（将数据做一个初始化的劫持 当我改变数据时，应该更新视图）\n    // vue组件中状态 data props watch computed\n    initState(vm)\n\n    // 核心特性响应式原理\n    // vue只是参考MVVM的框架 https://cn.vuejs.org/v2/guide/instance.html#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-Vue-%E5%AE%9E%E4%BE%8B\n    // 数据变化视图更新，视图变化数据会受影响（MVVM）不能跳过数据去更新视图，$refs可以修改dom不是纯粹的mvvm\n    // \n  }\n}","import { initMixin } from \"./init\"\n\n// 构造函数写法\nfunction Vue (options) {\n  this._init(options) // 入口方法，做初始化操作\n}\n\n// 写成插件,对原型扩展\ninitMixin(Vue)\n\nexport default Vue"],"names":["Observer","value","walk","data","keys","Object","forEach","key","defineReactive","observe","defineProperty","get","console","log","set","newValue","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;EACJ,oBAAYC,KAAZ,EAAmB;EAAA;;EACjB;EACA,SAAKC,IAAL,CAAUD,KAAV;EACD;;;;aACD,cAAKE,IAAL,EAAW;EACT,UAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,IAAZ,CAAX;EACAC,MAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;EAClBC,QAAAA,cAAc,CAACL,IAAD,EAAOI,GAAP,EAAYJ,IAAI,CAACI,GAAD,CAAhB,CAAd,CADkB;EAEnB,OAFD;EAGD;;;;;;;EAIH,SAASC,cAAT,CAAwBL,IAAxB,EAA8BI,GAA9B,EAAmCN,KAAnC,EAA0C;EACxC;EACAQ,EAAAA,OAAO,CAACR,KAAD,CAAP;EACAI,EAAAA,MAAM,CAACK,cAAP,CAAsBP,IAAtB,EAA4BI,GAA5B,EAAiC;EAC/BI,IAAAA,GAD+B,iBACzB;EACJC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;EACA,aAAOZ,KAAP;EACD,KAJ8B;EAK/Ba,IAAAA,GAL+B,eAK3BC,QAL2B,EAKjB;EACZH,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBV,IAAtB,EAA4BI,GAA5B,EAAiCN,KAAjC;EACA,UAAIc,QAAQ,KAAKd,KAAjB,EAAwB;EACxBQ,MAAAA,OAAO,CAACM,QAAD,CAAP,CAHY;;EAIZd,MAAAA,KAAK,GAAGc,QAAR;EACD;EAV8B,GAAjC;EAYD;;EAEM,SAASN,OAAT,CAAiBN,IAAjB,EAAuB;EAC5B;EACA;EACA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;EAC7C;EACD;;EACD,SAAO,IAAIH,QAAJ,CAAaG,IAAb,CAAP;EACD;;ECpCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACbmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;;EACD,MAAIC,IAAI,CAACK,QAAT,EAAmB;;EAGnB,MAAIL,IAAI,CAACM,KAAT,EAAgB;EAGjB;;EAGD,SAASF,QAAT,CAAkBL,EAAlB,EAAsB;EAAA,MACdd,IADc,GACLc,EAAE,CAACE,QADE,CACdhB,IADc;;EAGpBc,EAAAA,EAAE,CAACQ,KAAH,GAAWtB,IAAI,GAAG,OAAOA,IAAP,IAAe,UAAf,GAA4BA,IAAI,CAACuB,IAAL,CAAUT,EAAV,CAA5B,GAA4Cd,IAA9D;EACAM,EAAAA,OAAO,CAACN,IAAD,CAAP;EACD;;ECzBM,SAASwB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7B;EACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMd,EAAE,GAAG,IAAX,CADuC;;EAGvCA,IAAAA,EAAE,CAACE,QAAH,GAAcY,OAAd,CAHuC;EAKvC;;EACAf,IAAAA,SAAS,CAACC,EAAD,CAAT,CANuC;EASvC;EACA;EACA;EACD,GAZD;EAaD;;ECdD,SAASW,GAAT,CAAcG,OAAd,EAAuB;EACrB,OAAKD,KAAL,CAAWC,OAAX,EADqB;;EAEtB;;;EAGDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}